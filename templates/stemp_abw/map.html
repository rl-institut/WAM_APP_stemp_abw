{% load static %}
{% load leaflet_tags %}
{% load geojson_tags %}

<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stemp Tool Anhalt</title>
    <link rel="stylesheet" type="text/css" href="{% static 'stemp_abw/img/ionicons-2.0.1/css/ionicons.css' %}">
    <link rel="stylesheet" href="{% static 'stemp_abw/foundation/css/app.css' %}">

    {% leaflet_css %}
    {% leaflet_js %}

  </head>
  <body>

    <div class="l-bg-color-w u-vh--100">

        <!-- TOP NAVIGATION START -->
        <!-- MAIN NAVIGATION START -->

        <nav>
          <div class="title-bar" id="nav-container" data-responsive-toggle="simple-menu" data-hide-for="medium">
            <button class="menu-icon" type="button" data-toggle></button>
            <div class="title-bar-title"></div>
          </div>

          <div class="top-bar" id="simple-menu">
            <div class="top-bar-left show-for-large">
              <ul class="menu">
                <li><a class="anchor-text--light" href="{% url 'stemp_abw:index' %}">Startseite</a></li>
              </ul>
            </div>
            <div class="top-bar-right">
              <ul class="dropdown menu" id="nav-list-vertical" data-dropdown-menu>
                <li><a class="anchor-text--light" href="{% url 'stemp_abw:index' %}" style="font-weight: 300; padding-right: 1.5rem">Datenschutz</a></li>
                <li>
                  <a class="anchor-text--light" href="#">Menu</a>
                  <ul class="menu vertical">
                    <li><a class="anchor-text--light" href="{% url 'stemp_abw:index' %}">Startseite</a></li>
                    <li><a class="anchor-text--light" href="#">Kontakt</a></li>
                    <li><a class="anchor-text--light" href="#">Impressum</a></li>
                    <li><a class="anchor-text--light" href="#">Datenschutz</a></li>
                    <li><a class="anchor-text--light" href="#">Quellen</a></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </nav>

        <!-- MAIN NAVIGATION END -->    <!-- TOP NAVIGATION END -->

        <div class="off-canvas-wrapper off-canvas-wrapper--left">

          <!-- OFF CANVAS START -->
          <div class="off-canvas position-left" id="offCanvas" data-off-canvas data-close-on-click="false" data-content-overlay="false" data-transition="overlap" style="color: black; overflow-y: hidden">

            <div class="grid-y medium-grid-frame">
              <div class="cell medium-auto medium-cell-block-container">
                <div class="grid-x">
                  <div class="cell small-3 medium-2 offcanvas-tabs__wrapper medium-cell-block-y">
                    <ul class="vertical tabs" data-tabs id="offcanvas-tabs">
                      <li class="tabs-title is-active">
                        <a href="#panel-scenarios" aria-selected="true">
                          <img src="{% static 'stemp_abw/img/icons_custom/Enavi_Scenario_w.svg' %}" id="tabs-icon--scenarios">
                          <h2>Szenario</h2>
                        </a>
                      </li>
                      <li class="tabs-title">
                        <a href="#panel-energy">
                          <img src="{% static 'stemp_abw/img/icons_custom/Enavi_Energy_w.svg' %}" id="tabs-icon--energy">
                          <h2 style="padding-top: .2rem;">Energie-<br>system</h2>
                        </a>
                      </li>
                      <li class="tabs-title">
                        <a href="#panel-areas">
                          <img src="{% static 'stemp_abw/img/icons_custom/Enavi_Layers_w.svg' %}" id="tabs-icon--areas">
                          <h2>Flächen</h2>
                        </a>
                      </li>
                      <li class="tabs-title">
                        <a href="#panel-results">
                          <img src="{% static 'stemp_abw/img/icons_custom/Enavi_Results_w.svg' %}" id="tabs-icon--results">
                          <h2>Ergebnisse</h2>
                        </a>
                      </li>
                    </ul>

                  </div>
                  <div class="cell small-9 medium-10 medium-cell-block-y tabs-content__wrapper">
                      <div class="tabs-content" data-tabs-content="offcanvas-tabs">

                        <!-- First panel content -->
                        <div class="tabs-panel is-active" id="panel-scenarios">
                          <form>
                            <fieldset>
                              <legend>Szenario auswählen 
                                <i class ="icon ion-information-circled icon--small" title="Informationen zum Inhalt"></i>
                              </legend>
                              <div>
                                <input type="radio" name="scenario" value="statusQuo" id="scenarioStatusQuo" required checked>
                                <label for="scenarioStatusQuo">Status Quo</label>
                              </div>
                              <div>
                                <input type="radio" name="scenario" value="germany" id="scenarioGermany">
                                <label for="scenarioGermany">Deutsches Klimaschutzziel</label>
                              </div>
                              <div>
                                <input type="radio" name="scenario" value="100" id="scenario100">
                                <label for="scenario100">100% EE in der Region</label>
                              </div>
                            </fieldset>
                          </form>
                          <div class="panel__text panel__text--highlighted">
                            <p id="scenarioPanelText">
                                <span style="font-weight:700">Status Quo</span><span style="display:inline-block">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</span>
                            </p>
                          </div>
                        </div>

                        <!-- Second panel content -->
                        <div class="tabs-panel" id="panel-energy">
                          <ul class="accordion" data-accordion>
                            <li class="accordion-item accordion-item--no-border is-active" data-accordion-item>
                              <a href="#" class="accordion-title accordion-title--100">Stromerzeugung</a>
                              <div class="accordion-content" data-tab-content >
                                <p>Kapazität Windkraftanlagen [MW] <i class ="icon ion-information-circled icon--small" title="Informationen zum Inhalt"></i></p>
                                <div class="slider slider--blue" data-slider data-initial-start="50" data-end="100" data-step="10">
                                  <span class="slider-handle"  data-slider-handle role="slider" tabindex="1"></span>
                                  <span class="slider-fill" data-slider-fill></span>
                                  <input type="hidden">
                                </div>
                              </div>
                            </li>
                            <li class="accordion-item" data-accordion-item>
                              <a href="#" class="accordion-title accordion-title--100">Wärmeerzeugung</a>
                              <div class="accordion-content" data-tab-content>
                                <textarea></textarea>
                                <button class="button">I do nothing!</button>
                              </div>
                            </li>
                            <li class="accordion-item" data-accordion-item>
                              <a href="#" class="accordion-title accordion-title--100">Strombedarf</a>
                              <div class="accordion-content" data-tab-content>
                                Type your name!
                                <input type="text"></input>
                              </div>
                            </li>
                          </ul>
                        </div>

                        <!-- Third panel content -->
                        <div class="tabs-panel" id="panel-areas">
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                          <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
                        </div>

                        <!-- Fourth panel content -->
                        <div class="tabs-panel" id="panel-results">
                          <p>Four</p>
                          <img class="thumbnail" src="{% static 'stemp_abw/img/generic/rectangle-2.jpg' %}">
                        </div>
                      </div>

                  </div>
                </div>
              </div>
            </div>

            <button class="close-button" aria-label="Close menu" type="button" data-close>
              <span aria-hidden="true">&times;</span>
            </button>

          </div>
          <!-- OFF CANVAS END -->

          <!-- CONTENT (MAP + FOOTER) START -->
          <div class="off-canvas-content" data-off-canvas-content>
            <div class="map-wrapper">

              <button type="button" class="button open-offcanvas" data-toggle="offCanvas" title="Parameter">
                <i class="icon ion-android-options"></i>
              </button>

              <!-- MAP -->
              <!--<div id="mapid">-->
                {% leaflet_map "mapid" callback="main_map_init" %}
              <!--</div>-->

            </div>
          </div>
          <!-- CONTENT (MAP + FOOTER) END -->

        </div>

        <footer class="map-footer">
          <div class="grid-x">
    
            <div class="cell u-text--center" id="footer--hide" style="color: black; height: 1rem; position: absolute;">
              <div style="margin: 0;">
                <i class="icon ion-chevron-down" id="footer--hide__icon"></i>
              </div>
            </div>
    
            <div class="cell" id="footer-logos">
              <ul class="map-footer__logo">
                <li>
                  <a href="https://www.energieavantgarde.de/" target="_blank" title="Energieavantgarde Anhalt">
                    <img class="map-footer__logo-eaa" src="{% static 'stemp_abw/img/EAA_logo.png' %}" alt="Logo Energieavantgarde Anhalt">
                  </a>
                </li>
                <li>
                  <a href="https://reiner-lemoine-institut.de/" target="_blank" title="Reiner Lemoine Institut">
                    <img class="map-footer__logo-rli" src="{% static 'stemp_abw/img/rli_logo.png' %}" alt="Logo Reiner Lemoine Institut">
                  </a>
                </li>
                <li>
                  <a href="https://www.kopernikus-projekte.de/" target="_blank" title="Kopernikus Projekte">
                    <img class="map-footer__logo-kopernikus" src="{% static 'stemp_abw/img/kopernikus_logo.png' %}" alt="Logo Kopernikus">
                  </a>
                </li>
                <li>
                  <a href="https://www.bmbf.de/" target="_blank" title="Bundesministerium für Bildung und Forschung">
                    <img class="map-footer__logo-bmbf" src="{% static 'stemp_abw/img/BMBF_widget_final.png' %}" alt="Logo BMBF">
                  </a>
                </li>
              </ul>
            </div>

          </div>
        </footer>

      </div>

    <script src="{% static 'stemp_abw/foundation/js/app.js' %}"></script>
      <script type="text/javascript">

        function main_map_init (map, options) {

            // popup style
            var customPopup =
                {
                'maxWidth': '500',
                'className' : 'custom_popup'
                }

            var highlightStyle = {
                    weight: 2,
                    color: '#666',
                    dashArray: '',
                    fillOpacity: 0.7
                }

            var normalStyle = {
                    weight: 1,
                    opacity: 1,
                    color: 'gray',
                    fillOpacity: 0.25
            }

            // point style
            function style(feature) {
                return {
                    fillColor: '#ff7800',
                    weight: 2,
                    opacity: 1,
                    color: 'gray',
                    fillOpacity: 0.25
                };
            }

            // mousover styles
            function highlightFeature(e) {
                var layer = e.target;
                layer.setStyle(highlightStyle, {title: 'Hover Text'});
            }

            function resetHighlight(e) {
                geojson.resetStyle(e.target);
            }

            function highlightFeature(e) {
                var layer = e.target;
                layer.setStyle(highlightStyle);
            }

            // bind popups for each feature and define event actions
            function onEachFeature(feature, layer) {
                if (feature.properties && feature.properties.popup_content) {
                    layer.bindPopup(feature.properties.popup_content, customPopup);
                    };
                    layer.on({
                        click: highlightFeature,
                        mouseover: highlightFeature,
                        mouseout: resetHighlight,
                    });
            }

            function pointToLayer(feature, latlng) {
                var marker = L.circleMarker(latlng)
                //marker.bindPopup('<p>' + feature.properties.popup_content + ' XXX ' + '</p>');
                return marker;
            }

            var dataurl = "{% url 'stemp_abw:subst.data' %}";

            // Download GeoJSON via Ajax
            $.getJSON(dataurl, function (data) {

                // Add GeoJSON layer
                geojson=L.geoJson(data, {style: style, onEachFeature: onEachFeature,
                    pointToLayer: pointToLayer
                    }).addTo(map);

                });
                map.removeControl(map.zoomControl);
            	L.control.zoom({
		position: 'bottomright'
	}).addTo(map);

        }

    </script>
  </body>
</html>